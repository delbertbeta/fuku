# Outfit Platform æµ‹è¯•æ–¹æ¡ˆ

## é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®åç§°**: Outfit Platformï¼ˆæœè£…æ­é…ç®¡ç†å¹³å°ï¼‰
- **æœåŠ¡å™¨åœ°å€**: http://localhost:3000
- **æŠ€æœ¯æ ˆ**: Next.js + TypeScript + SQLite + Sharp
- **Spec æ–‡æ¡£**: `/openspec/changes/establish-outfit-platform/specs/`

## æµ‹è¯•æ¦‚è¿°

æœ¬æµ‹è¯•æ–¹æ¡ˆåŸºäº OpenSpec æ–‡æ¡£ï¼ŒéªŒè¯ Outfit Platform çš„åŠŸèƒ½å®ç°æ˜¯å¦ç¬¦åˆè§„èŒƒè¦æ±‚ã€‚æµ‹è¯•è¦†ç›–ç”¨æˆ·è®¤è¯ã€æœè£…ç®¡ç†ã€æ­é…ç®¡ç†ã€å“åº”å¼è®¾è®¡å’Œæ•°æ®éš”ç¦»ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## ä»»åŠ¡æ‹†åˆ†

### æ¨¡å— 1: ç”¨æˆ·è®¤è¯ç³»ç»Ÿ (User Authentication)

#### Task 1.1: ç”¨æˆ·æ³¨å†Œ

- [ ] è®¿é—®æ³¨å†Œé¡µé¢ï¼ŒéªŒè¯æ³¨å†Œè¡¨å•å­˜åœ¨
- [x] æµ‹è¯•æˆåŠŸæ³¨å†Œï¼ˆé‚®ç®± + 8ä½ä»¥ä¸Šå¯†ç ï¼‰
- [x] æµ‹è¯•å¼±å¯†ç æ‹’ç»ï¼ˆ< 8 å­—ç¬¦ï¼‰
- [ ] æµ‹è¯•é‡å¤é‚®ç®±æ³¨å†Œ
- [x] éªŒè¯æ³¨å†Œåç”¨æˆ·è‡ªåŠ¨ç™»å½•å¹¶é‡å®šå‘åˆ°æœè£…ç®¡ç†é¡µé¢
- [ ] éªŒè¯å¯†ç ä½¿ç”¨ bcrypt/argon2 åŠ å¯†å­˜å‚¨

#### Task 1.2: ç”¨æˆ·ç™»å½•

- [x] è®¿é—®ç™»å½•é¡µé¢ï¼ŒéªŒè¯ç™»å½•è¡¨å•å­˜åœ¨
- [x] æµ‹è¯•æˆåŠŸç™»å½•ï¼ˆä½¿ç”¨å·²æ³¨å†Œè´¦å·ï¼‰
- [x] éªŒè¯ç™»å½•åé‡å®šå‘åˆ°ä¸»é¡µ
- [x] æµ‹è¯•æ— æ•ˆå‡­è¯ï¼ˆé”™è¯¯å¯†ç ï¼‰
- [ ] æµ‹è¯•ä¸å­˜åœ¨çš„ç”¨æˆ·ç™»å½•
- [ ] éªŒè¯åˆ›å»º HTTP-only secure session cookie

#### Task 1.3: ç™»å‡ºåŠŸèƒ½

- [x] ç‚¹å‡»ç™»å‡ºæŒ‰é’®
- [x] éªŒè¯ä¼šè¯è¢«æ¸…é™¤
- [x] éªŒè¯é‡å®šå‘åˆ°ç™»å½•é¡µé¢

#### Task 1.4: ä¼šè¯ç®¡ç†

- [ ] éªŒè¯ä¼šè¯è¿‡æœŸæœºåˆ¶
- [ ] æµ‹è¯•è¿‡æœŸä¼šè¯è®¿é—®ä¿æŠ¤è·¯ç”±æ—¶çš„é‡å®šå‘

#### Task 1.5: æ•°æ®éš”ç¦» - è®¤è¯

- [ ] æ³¨å†Œå¹¶ç™»å½•ç”¨æˆ· A
- [ ] æ³¨å†Œå¹¶ç™»å½•ç”¨æˆ· B
- [ ] éªŒè¯ç”¨æˆ· B åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
- [ ] éªŒè¯ç”¨æˆ· A çš„æ•°æ®å¯¹ç”¨æˆ· B ä¸å¯è§

#### Task 1.6: é€Ÿç‡é™åˆ¶

- [ ] æµ‹è¯•ç™»å½•ç«¯ç‚¹é€Ÿç‡é™åˆ¶ï¼ˆ5æ¬¡å¤±è´¥/5åˆ†é’Ÿï¼‰
- [ ] æµ‹è¯•æ³¨å†Œç«¯ç‚¹é€Ÿç‡é™åˆ¶ï¼ˆ3æ¬¡/1å°æ—¶ï¼‰

---

### æ¨¡å— 2: æœè£…ç®¡ç† (Clothing Management)

#### Task 2.1: åˆ›å»ºæœè£…é¡¹ - å¿…å¡«å­—æ®µ

- [x] å¯¼èˆªåˆ°æœè£…åˆ›å»ºé¡µé¢
- [x] éªŒè¯è¡¨å•åŒ…å«ï¼šå›¾ç‰‡ä¸Šä¼ ã€ç±»åˆ«é€‰æ‹©ã€åç§°
- [ ] æµ‹è¯•åˆ›å»ºåªæœ‰å¿…å¡«å­—æ®µçš„æœè£…é¡¹
- [x] æµ‹è¯•ç¼ºå°‘å¿…å¡«å­—æ®µæ—¶çš„éªŒè¯ï¼ˆä¸ä¼ å›¾ç‰‡ï¼‰

#### Task 2.2: åˆ›å»ºæœè£…é¡¹ - æ‰€æœ‰å­—æ®µ

- [ ] æä¾›å›¾ç‰‡ã€ç±»åˆ«ã€åç§°ã€æè¿°ã€ä»·æ ¼ã€è´­ä¹°æ—¥æœŸ
- [ ] éªŒè¯æ‰€æœ‰å­—æ®µæ­£ç¡®ä¿å­˜
- [ ] éªŒè¯è¯¦æƒ…é¡µæ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯

#### Task 2.3: ç±»åˆ«éªŒè¯

- [x] éªŒè¯ç±»åˆ«é€‰é¡¹ä¸º: top, jacket, pants, shoesï¼ˆå°å†™ï¼‰
- [ ] æµ‹è¯•æ— æ•ˆç±»åˆ«è¢«æ‹’ç»
- [ ] æµ‹è¯•æŒ‰ç±»åˆ«ç­›é€‰åŠŸèƒ½

#### Task 2.4: å›¾ç‰‡ä¸Šä¼  - éªŒè¯

- [x] æµ‹è¯•æœ‰æ•ˆæ–‡ä»¶ç±»å‹ä¸Šä¼ ï¼ˆJPEG, PNG, WebPï¼‰
- [ ] æµ‹è¯•æ— æ•ˆæ–‡ä»¶ç±»å‹æ‹’ç»ï¼ˆ.exe, .pdfï¼‰
- [ ] æµ‹è¯•æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆ10MBï¼‰
- [ ] æµ‹è¯•æœåŠ¡å™¨ç«¯å‹ç¼©ï¼ˆæœ€å¤§ 1MBï¼Œæœ€å¤§ 1920pxï¼‰

#### Task 2.5: å›¾ç‰‡ä¸Šä¼  - å¤„ç†é€»è¾‘

- [ ] æµ‹è¯•å¤§å›¾ç‰‡å‹ç¼©ï¼ˆ5MB, 4000x3000px â†’ â‰¤1MB, â‰¤1920pxï¼‰
- [ ] æµ‹è¯•å·²ç¬¦åˆé™åˆ¶çš„å›¾ç‰‡ä¸å¤„ç†ï¼ˆ500KB, 1200x800pxï¼‰
- [ ] æµ‹è¯•æ¨ªå±å›¾ç‰‡ä¿æŒå®½é«˜æ¯”ï¼ˆ3000x2000px â†’ 1920x1280pxï¼‰
- [ ] æµ‹è¯•ç«–å±å›¾ç‰‡ä¿æŒå®½é«˜æ¯”ï¼ˆ1500x2500px â†’ 1152x1920pxï¼‰

#### Task 2.6: æœè£…åˆ—è¡¨

- [x] å¯¼èˆªåˆ°æœè£…åˆ—è¡¨é¡µé¢
- [ ] éªŒè¯æ˜¾ç¤ºæ‰€æœ‰å·²åˆ›å»ºçš„æœè£…é¡¹
- [ ] éªŒè¯æ¯ä¸ªæœè£…é¡¹æ˜¾ç¤ºï¼šå›¾ç‰‡ã€åç§°ã€ç±»åˆ«
- [ ] éªŒè¯æŒ‰åˆ›å»ºæ—¥æœŸå€’åºæ’åˆ—ï¼ˆæœ€æ–°åœ¨å‰ï¼‰
- [ ] æµ‹è¯•ç±»åˆ«ç­›é€‰åŠŸèƒ½
- [ ] æµ‹è¯•æ¸…é™¤ç­›é€‰åŠŸèƒ½

#### Task 2.7: æœè£…è¯¦æƒ…

- [ ] ç‚¹å‡»æœè£…é¡¹è¿›å…¥è¯¦æƒ…é¡µ
- [ ] éªŒè¯æ˜¾ç¤ºå®Œæ•´å›¾ç‰‡
- [ ] éªŒè¯æ˜¾ç¤ºæ‰€æœ‰å­—æ®µï¼ˆåç§°ã€ç±»åˆ«ã€ä»·æ ¼ã€è´­ä¹°æ—¥æœŸã€æè¿°ï¼‰

#### Task 2.8: ç¼–è¾‘æœè£…

- [ ] ç¼–è¾‘æœè£…é¡¹åç§°
- [ ] ä¿å­˜å¹¶éªŒè¯åˆ—è¡¨å’Œè¯¦æƒ…é¡µæ›´æ–°
- [ ] æµ‹è¯•æ·»åŠ å¯é€‰å­—æ®µï¼ˆä»·æ ¼ï¼‰
- [ ] æµ‹è¯•åˆ é™¤å¯é€‰å­—æ®µ

#### Task 2.9: åˆ é™¤æœè£…

- [ ] åˆ é™¤æœªä½¿ç”¨çš„æœè£…é¡¹
- [ ] éªŒè¯ä»æ•°æ®åº“å’Œåˆ—è¡¨ä¸­ç§»é™¤
- [ ] éªŒè¯å…³è”å›¾ç‰‡è¢«åˆ é™¤
- [ ] æµ‹è¯•åˆ é™¤è¢«æ­é…ä½¿ç”¨çš„æœè£…é¡¹ï¼ˆåº”æ‹’ç»å¹¶æ˜¾ç¤ºç›¸å…³æ­é…åˆ—è¡¨ï¼‰

#### Task 2.10: æœç´¢åŠŸèƒ½

- [ ] æµ‹è¯•æŒ‰åç§°æœç´¢æœè£…
- [ ] éªŒè¯åªæ˜¾ç¤ºåŒ¹é…ç»“æœ
- [ ] æµ‹è¯•æ¸…é™¤æœç´¢æ˜¾ç¤ºæ‰€æœ‰é¡¹

---

### æ¨¡å— 3: æ­é…ç®¡ç† (Outfit Management)

#### Task 3.1: åˆ›å»ºæ­é…

- [ ] å¯¼èˆªåˆ°æ­é…åˆ›å»ºé¡µé¢
- [ ] éªŒè¯è¡¨å•åŒ…å«ï¼šåç§°è¾“å…¥æ¡†ã€è¡£ç‰©é€‰æ‹©å™¨
- [ ] æµ‹è¯•åˆ›å»ºæ­é…ï¼ˆé€‰æ‹© 2+ è¡£ç‰©é¡¹ + åç§°ï¼‰
- [ ] éªŒè¯åˆ›å»ºæˆåŠŸåå‡ºç°åœ¨åˆ—è¡¨ä¸­
- [ ] æµ‹è¯•ä¸è¾“å…¥åç§°çš„éªŒè¯
- [ ] æµ‹è¯•ä¸é€‰æ‹©è¡£ç‰©çš„éªŒè¯ï¼ˆè‡³å°‘1ä»¶ï¼‰

#### Task 3.2: è¡£ç‰©é€‰æ‹©

- [ ] æµ‹è¯•å¤šé€‰è¡£ç‰©åŠŸèƒ½
- [ ] éªŒè¯é€‰ä¸­çŠ¶æ€å¯è§
- [ ] æµ‹è¯•å–æ¶ˆé€‰ä¸­é¡¹
- [ ] æµ‹è¯•é˜²æ­¢é‡å¤é€‰æ‹©åŒä¸€è¡£ç‰©

#### Task 3.3: æ­é…åˆ—è¡¨

- [ ] å¯¼èˆªåˆ°æ­é…åˆ—è¡¨é¡µé¢
- [ ] éªŒè¯æ˜¾ç¤ºæ‰€æœ‰å·²åˆ›å»ºçš„æ­é…
- [ ] éªŒè¯æ¯ä¸ªå¡ç‰‡æ˜¾ç¤ºï¼šåç§°ã€è¡£ç‰©é¢„è§ˆç¼©ç•¥å›¾
- [ ] éªŒè¯æœ€å¤šæ˜¾ç¤º 4 ä¸ªç¼©ç•¥å›¾ï¼Œè¶…è¿‡æ˜¾ç¤º "+X more"
- [ ] éªŒè¯æŒ‰åˆ›å»ºæ—¥æœŸå€’åºæ’åˆ—

#### Task 3.4: æ­é…è¯¦æƒ…

- [ ] ç‚¹å‡»æ­é…è¿›å…¥è¯¦æƒ…é¡µ
- [ ] éªŒè¯æ˜¾ç¤ºåç§°å’Œæè¿°
- [ ] éªŒè¯åˆ—å‡ºæ‰€æœ‰å…³è”è¡£ç‰©
- [ ] éªŒè¯æ¯ä¸ªè¡£ç‰©æ˜¾ç¤ºï¼šå›¾ç‰‡ã€åç§°ã€ç±»åˆ«
- [ ] éªŒè¯å¯ä»¥ç‚¹å‡»è¡£ç‰©è·³è½¬åˆ°è¯¦æƒ…é¡µ
- [ ] éªŒè¯è¡£ç‰©æŒ‰ç±»åˆ«ç»„ç»‡/æ ‡æ³¨

#### Task 3.5: ç¼–è¾‘æ­é…

- [ ] æ›´æ–°æ­é…åç§°
- [ ] éªŒè¯åˆ—è¡¨å’Œè¯¦æƒ…é¡µæ›´æ–°
- [ ] æµ‹è¯•æ·»åŠ æ–°è¡£ç‰©åˆ°æ­é…
- [ ] æµ‹è¯•ç§»é™¤æ­é…ä¸­çš„è¡£ç‰©
- [ ] æµ‹è¯•ç§»é™¤æœ€åä¸€ä»¶è¡£ç‰©ï¼ˆåº”æ‹’ç»ï¼‰

#### Task 3.6: åˆ é™¤æ­é…

- [ ] åˆ é™¤æ­é…
- [ ] éªŒè¯ä»åˆ—è¡¨ä¸­ç§»é™¤
- [ ] éªŒè¯å…³è”è¡£ç‰©ä¸å—å½±å“

#### Task 3.7: æ­é…æœç´¢

- [ ] æµ‹è¯•æŒ‰åç§°æœç´¢æ­é…
- [ ] éªŒè¯åªæ˜¾ç¤ºåŒ¹é…ç»“æœ
- [ ] æµ‹è¯•æ¸…é™¤æœç´¢æ˜¾ç¤ºæ‰€æœ‰é¡¹

#### Task 3.8: è¡£ç‰©å¯ç”¨æ€§

- [ ] ç¡®è®¤åˆ›å»ºæ­é…æ—¶åªæ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„è¡£ç‰©
- [ ] éªŒè¯å…¶ä»–ç”¨æˆ·çš„è¡£ç‰©ä¸å¯è§

#### Task 3.9: ä½¿ç”¨è¿½è¸ª

- [ ] åœ¨æœè£…è¯¦æƒ…é¡µæŸ¥çœ‹ä½¿ç”¨è¯¥è¡£ç‰©çš„æ­é…åˆ—è¡¨
- [ ] éªŒè¯å¯ä»¥è·³è½¬åˆ°æ¯ä¸ªæ­é…

---

### æ¨¡å— 4: å“åº”å¼è®¾è®¡ (Responsive Design)

#### Task 4.1: ç§»åŠ¨ç«¯è§†å›¾ (width < 640px)

- [ ] æœè£…åˆ—è¡¨æ˜¾ç¤ºä¸ºå•åˆ—
- [ ] æ¯ä¸ªå¡ç‰‡ä½¿ç”¨å…¨å±å®½åº¦
- [ ] æ­é…åˆ—è¡¨æ˜¾ç¤ºä¸ºå•åˆ—
- [ ] åº•éƒ¨å¯¼èˆªæ å¯è§

#### Task 4.2: å¹³æ¿è§†å›¾ (640px â‰¤ width < 1024px)

- [ ] éªŒè¯ç½‘æ ¼å¸ƒå±€é€‚é…

#### Task 4.3: æ¡Œé¢ç«¯è§†å›¾ (width â‰¥ 1024px)

- [ ] æœè£…åˆ—è¡¨æ˜¾ç¤ºä¸ºå¤šåˆ—ç½‘æ ¼
- [ ] æ­é…åˆ—è¡¨æ˜¾ç¤ºä¸ºå¤šåˆ—ç½‘æ ¼
- [ ] é¡¶éƒ¨å¯¼èˆªæ å¯è§
- [ ] æ‚¬åœæ•ˆæœæ­£å¸¸

#### Task 4.4: è§¦æ§å‹å¥½æ€§

- [ ] ç§»åŠ¨ç«¯è§¦æ§ç›®æ ‡ â‰¥ 44px
- [ ] è¡¨å•å¸ƒå±€é€‚é…ç§»åŠ¨ç«¯

---

### æ¨¡å— 5: æ•°æ®éš”ç¦» (Data Isolation)

#### Task 5.1: å®Œæ•´æ•°æ®éš”ç¦»æµ‹è¯•

- [ ] æ³¨å†Œå¹¶ç™»å½•ç”¨æˆ· Aï¼Œåˆ›å»ºæœè£…å’Œæ­é…
- [ ] ç™»å‡ºå¹¶æ³¨å†Œç”¨æˆ· B
- [ ] ç™»å½•ç”¨æˆ· Bï¼ŒéªŒè¯åªèƒ½çœ‹åˆ°è‡ªå·±çš„æ•°æ®
- [ ] ç™»å‡ºå¹¶é‡æ–°ç™»å½•ç”¨æˆ· A
- [ ] éªŒè¯ç”¨æˆ· A çš„æ•°æ®å®Œæ•´ä¸”ç‹¬ç«‹
- [ ] å°è¯•è®¿é—®ç”¨æˆ· A çš„æœè£… IDï¼ˆåº” 404 æˆ– 403ï¼‰

---

### æ¨¡å— 6: å®‰å…¨æ€§å’Œæ€§èƒ½

#### Task 6.1: å®‰å…¨æ€§

- [ ] éªŒè¯æ‰€æœ‰ API è·¯ç”±éœ€è¦è®¤è¯
- [ ] éªŒè¯ç”¨æˆ·ä¸èƒ½è®¿é—®å…¶ä»–ç”¨æˆ·çš„æ•°æ®ï¼ˆé€šè¿‡ç›´æ¥ API è¯·æ±‚ï¼‰
- [ ] éªŒè¯å¯†ç ä¸è®°å½•åœ¨æ—¥å¿—ä¸­
- [ ] éªŒè¯ HTTP-only session cookie

#### Task 6.2: è¾“å…¥éªŒè¯

- [ ] æµ‹è¯•æ‰€æœ‰ API ç«¯ç‚¹çš„è¾“å…¥éªŒè¯
- [ ] æµ‹è¯• SQL æ³¨å…¥é˜²æŠ¤
- [ ] æµ‹è¯• XSS é˜²æŠ¤

#### Task 6.3: æ€§èƒ½

- [ ] å¤§å›¾ç‰‡ä¸Šä¼ å’Œå¤„ç†æ—¶é—´
- [ ] åˆ—è¡¨é¡µé¢åŠ è½½æ€§èƒ½
- [ ] å›¾ç‰‡åŠ è½½ä¼˜åŒ–ï¼ˆæ‡’åŠ è½½ï¼‰

---

## å½“å‰æµ‹è¯•è¿›åº¦

### æ€»ä½“è¿›åº¦

| æ¨¡å—         | ä»»åŠ¡æ•°  | å·²å®Œæˆ | å¾…æµ‹è¯•  | å®Œæˆåº¦  |
| ------------ | ------- | ------ | ------- | ------- |
| ç”¨æˆ·è®¤è¯ç³»ç»Ÿ | 32      | 9      | 23      | 28%     |
| æœè£…ç®¡ç†     | 38      | 3      | 35      | 8%      |
| æ­é…ç®¡ç†     | 28      | 0      | 28      | 0%      |
| å“åº”å¼è®¾è®¡   | 9       | 0      | 9       | 0%      |
| æ•°æ®éš”ç¦»     | 1       | 0      | 1       | 0%      |
| å®‰å…¨æ€§å’Œæ€§èƒ½ | 10      | 0      | 10      | 0%      |
| **æ€»è®¡**     | **118** | **12** | **106** | **10%** |

### å·²å®Œæˆçš„ä»»åŠ¡

âœ… **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** (9/32)

- Task 1.1.2: æµ‹è¯•æˆåŠŸæ³¨å†Œ
- Task 1.1.3: æµ‹è¯•å¼±å¯†ç æ‹’ç»
- Task 1.2.1: è®¿é—®ç™»å½•é¡µé¢
- Task 1.2.2: æµ‹è¯•æˆåŠŸç™»å½•
- Task 1.2.3: éªŒè¯ç™»å½•åé‡å®šå‘
- Task 1.2.4: æµ‹è¯•æ— æ•ˆå‡­è¯
- Task 1.3.1: ç‚¹å‡»ç™»å‡ºæŒ‰é’®
- Task 1.3.2: éªŒè¯ä¼šè¯æ¸…é™¤
- Task 1.3.3: éªŒè¯é‡å®šå‘

âœ… **æœè£…ç®¡ç†** (3/38)

- Task 2.1.1: å¯¼èˆªåˆ°æœè£…åˆ›å»ºé¡µé¢
- Task 2.1.2: éªŒè¯è¡¨å•å­—æ®µ
- Task 2.1.4: æµ‹è¯•ç¼ºå°‘å¿…å¡«å­—æ®µéªŒè¯

---

## å·²å‘ç°çš„é—®é¢˜

### ä¸¥é‡é—®é¢˜

| ID  | é—®é¢˜                                           | ä½ç½®                                       | ä¸¥é‡ç¨‹åº¦ | çŠ¶æ€   |
| --- | ---------------------------------------------- | ------------------------------------------ | -------- | ------ |
| #1  | æ³¨å†Œåæœªè‡ªåŠ¨ç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µè€Œéæœè£…ç®¡ç†é¡µ | `src/app/api/auth/register/route.ts:51-62` | é«˜       | å¾…ä¿®å¤ |
| #2  | å›¾ç‰‡ä¸Šä¼ åä¿å­˜æ“ä½œè¶…æ—¶ï¼Œæ— æ³•å®Œæˆæœè£…é¡¹åˆ›å»º     | `src/app/api/clothing/route.ts:95-108`     | é«˜       | å¾…è°ƒè¯• |

### ä¸­ç­‰é—®é¢˜

| ID  | é—®é¢˜                                             | ä½ç½®                               | ä¸¥é‡ç¨‹åº¦ | çŠ¶æ€   |
| --- | ------------------------------------------------ | ---------------------------------- | -------- | ------ |
| #3  | ç±»åˆ«å‘½åä¸ä¸€è‡´ï¼šspec è¦æ±‚å°å†™ï¼ŒUI æ˜¾ç¤ºé¦–å­—æ¯å¤§å†™ | `src/app/api/clothing/route.ts:13` | ä¸­       | å¾…å†³ç­– |

### é—®é¢˜æè¿°è¯¦æƒ…

#### é—®é¢˜ #1: æ³¨å†Œåæœªè‡ªåŠ¨ç™»å½•

**Spec è¦æ±‚**:

> Given the registration form is displayed
> When a user provides a valid email address and password
> Then the user should be logged in automatically
> And the user should be redirected to the clothing management page

**å®é™…è¡Œä¸º**:

- æ³¨å†ŒæˆåŠŸè¿”å› JSON `{ user: { id, email } }`
- é‡å®šå‘åˆ° `/login` è€Œé `/` æˆ– `/clothing`
- æ²¡æœ‰åˆ›å»º session æˆ–è®¾ç½® cookie

**ä¿®å¤æ–¹æ¡ˆ**:

```typescript
// åœ¨ src/app/api/auth/register/route.ts ä¸­
import { createSession } from "@/lib/auth";

// æ³¨å†ŒæˆåŠŸåæ·»åŠ ï¼š
const session = createSession(user.id);
const response = NextResponse.json(
  { user: { id: user.id, email: user.email } },
  { status: 201 }
);
response.cookies.set("session", session.token, {
  httpOnly: true,
  secure: process.env.NODE_ENV === "production",
  sameSite: "lax",
  maxAge: 60 * 60 * 24 * 7, // 7 days
});
return response;
```

#### é—®é¢˜ #2: å›¾ç‰‡ä¸Šä¼ è¶…æ—¶

**åœºæ™¯**: ä¸Šä¼ å›¾ç‰‡åï¼Œä¿å­˜è¯·æ±‚æ— å“åº”æˆ–è¶…æ—¶

**å¯èƒ½åŸå› **:

1. Sharp å›¾ç‰‡å¤„ç†è€—æ—¶è¿‡é•¿
2. æ–‡ä»¶å†™å…¥æƒé™é—®é¢˜
3. æ•°æ®åº“å†™å…¥é”™è¯¯
4. æµè§ˆå™¨è¿æ¥è¶…æ—¶

**è°ƒè¯•æ­¥éª¤**:

1. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—: `tail -f /tmp/next-dev.log`
2. æ£€æŸ¥ `public/uploads/` ç›®å½•æƒé™
3. æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯æ—¥å¿—åˆ° `/api/clothing` POST å¤„ç†å™¨
4. æµ‹è¯•ä¸åŒå¤§å°å’Œæ ¼å¼çš„å›¾ç‰‡

#### é—®é¢˜ #3: ç±»åˆ«å‘½åä¸ä¸€è‡´

**Spec è¦æ±‚**: `top, jacket, pants, shoes`ï¼ˆå°å†™ï¼‰
**å®é™…å®ç°**: UI æ˜¾ç¤º `Top, Jacket, Pants, Shoes`ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰

**å»ºè®®**: ç»Ÿä¸€ä½¿ç”¨å°å†™ï¼Œåœ¨ UI å±‚é¢è½¬æ¢æ˜¾ç¤ºæ ¼å¼ï¼š

```typescript
// API: ä½¿ç”¨å°å†™
category: z.enum(["top", "jacket", "pants", "shoes"]);

// UI: æ˜¾ç¤ºæ—¶è½¬æ¢
const displayCategory = category.charAt(0).toUpperCase() + category.slice(1);
```

---

## ä¸‹æ¬¡æµ‹è¯•æ¢å¤æ­¥éª¤

### 1. å¯åŠ¨æœåŠ¡å™¨

```bash
npm run dev > /tmp/next-dev.log 2>&1 &
```

### 2. éªŒè¯æœåŠ¡å™¨è¿è¡Œ

```bash
sleep 5 && tail -20 /tmp/next-dev.log
```

### 3. å¯åŠ¨ DevTools Debugger

ä½¿ç”¨ `@devtools-debugger` subagent è¿›è¡Œæµè§ˆå™¨æµ‹è¯•

### 4. ç»§ç»­æµ‹è¯•ä¼˜å…ˆçº§

**é«˜ä¼˜å…ˆçº§**ï¼ˆé˜»å¡å…¶ä»–æµ‹è¯•ï¼‰:

1. ä¿®å¤é—®é¢˜ #1 (æ³¨å†Œåè‡ªåŠ¨ç™»å½•)
2. è°ƒè¯•é—®é¢˜ #2 (å›¾ç‰‡ä¸Šä¼ è¶…æ—¶)
3. å†³ç­–é—®é¢˜ #3 (ç±»åˆ«å‘½åè§„èŒƒ)

**ä¸­ä¼˜å…ˆçº§**:

- å®Œæˆ Task 2.1-2.5: æœè£…åˆ›å»ºå’Œå›¾ç‰‡ä¸Šä¼ å®Œæ•´æµ‹è¯•
- å®Œæˆ Task 2.6-2.10: æœè£…ç®¡ç† CRUD æµ‹è¯•

**ä½ä¼˜å…ˆçº§**:

- Task 3.x: æ­é…ç®¡ç†
- Task 4.x: å“åº”å¼è®¾è®¡
- Task 5.x: æ•°æ®éš”ç¦»

### 5. æµ‹è¯•æ•°æ®å‡†å¤‡

å»ºè®®å‡†å¤‡ä»¥ä¸‹æµ‹è¯•æ•°æ®ï¼š

- æµ‹è¯•å›¾ç‰‡ï¼ˆJPEG/PNG/WebPï¼Œä¸åŒå°ºå¯¸ï¼‰
- æµ‹è¯•ç”¨æˆ·è´¦å·ï¼š
  - User A: `testuser1@example.com` / `securepassword123`
  - User B: `testuser2@example.com` / `securepassword456`

---

## æµ‹è¯•æ£€æŸ¥æ¸…å•

### æ¯æ¬¡æµ‹è¯•å‰æ£€æŸ¥

- [ ] æœåŠ¡å™¨å·²å¯åŠ¨å¹¶è¿è¡Œåœ¨ http://localhost:3000
- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–
- [ ] ä¸Šä¼ ç›®å½• `public/uploads/` å­˜åœ¨ä¸”æœ‰å†™æƒé™
- [ ] æµè§ˆå™¨å·²æ¸…é™¤ä¹‹å‰çš„ cookies å’Œç¼“å­˜

### æ¯æ¬¡æµ‹è¯•åæ£€æŸ¥

- [ ] è®°å½•æµ‹è¯•ç»“æœï¼ˆâœ… é€šè¿‡ / âŒ å¤±è´¥ / âš ï¸ è­¦å‘Šï¼‰
- [ ] æ•è·æ§åˆ¶å°é”™è¯¯
- [ ] æ•è·ç½‘ç»œè¯·æ±‚é”™è¯¯
- [ ] ä¿å­˜æˆªå›¾ï¼ˆå¦‚é€‚ç”¨ï¼‰
- [ ] æ›´æ–°æ­¤æ–‡æ¡£çš„è¿›åº¦è¡¨

---

## ç›¸å…³æ–‡ä»¶

### Spec æ–‡æ¡£

- `/openspec/changes/establish-outfit-platform/proposal.md`
- `/openspec/changes/establish-outfit-platform/tasks.md`
- `/openspec/changes/establish-outfit-platform/specs/user-authentication/spec.md`
- `/openspec/changes/establish-outfit-platform/specs/clothing-management/spec.md`
- `/openspec/changes/establish-outfit-platform/specs/outfit-management/spec.md`

### æºä»£ç 

- `/src/app/api/auth/register/route.ts` - æ³¨å†Œ API
- `/src/app/api/auth/login/route.ts` - ç™»å½• API
- `/src/app/api/clothing/route.ts` - æœè£… API
- `/src/app/api/outfits/route.ts` - æ­é… API
- `/src/lib/auth/index.ts` - è®¤è¯åº“
- `/src/lib/storage/index.ts` - å­˜å‚¨åº“
- `/src/lib/storage/local.ts` - æœ¬åœ°å­˜å‚¨
- `/src/lib/storage/s3.ts` - S3 å­˜å‚¨

### é…ç½®æ–‡ä»¶

- `/.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿
- `/package.json` - é¡¹ç›®ä¾èµ–

---

## æµ‹è¯•å‘½ä»¤é€ŸæŸ¥

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æŸ¥çœ‹æ—¥å¿—
tail -f /tmp/next-dev.log

# æ£€æŸ¥æ•°æ®åº“
sqlite3 ./data/outfit-platform.db ".tables"
sqlite3 ./data/outfit-platform.db "SELECT * FROM users;"

# æ¸…ç†æ•°æ®åº“ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
rm ./data/outfit-platform.db
npm run db:init

# æ£€æŸ¥ä¸Šä¼ æ–‡ä»¶
ls -lh ./public/uploads/
```

---

## ç‰ˆæœ¬å†å²

| æ—¥æœŸ       | ç‰ˆæœ¬ | è¯´æ˜                             |
| ---------- | ---- | -------------------------------- |
| 2026-01-17 | 1.0  | åˆå§‹æµ‹è¯•è®¡åˆ’ï¼ŒåŸºäº spec æ–‡æ¡£åˆ›å»º |

---

**æœ€åæ›´æ–°**: 2026-01-17
**æµ‹è¯•æ‰§è¡Œè€…**: devtools-debugger agent
**æµ‹è¯•çŠ¶æ€**: ğŸŸ¡ è¿›è¡Œä¸­ï¼ˆé˜»å¡ï¼šé—®é¢˜ #1 å’Œ #2ï¼‰
